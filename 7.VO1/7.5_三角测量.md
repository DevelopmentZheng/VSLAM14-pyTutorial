&emsp;
# 5 三角测量
- 求出 $\pmb{R}，\pmb{t}$ 后求距离

之前两节，我们使用对极几何约束估计了相机运动，也讨论这种方法的局限性。在得到运动之后，下一步我们需要用相机的运动估计特征点的空间位置。

在单目 SLAM 中，仅通过单张图像无法获得像素的深度信息，我们需要通过 `三角测量（Triangulation）（或三角化）` 的方法来估计地图点的深度。

>三角测量
- 三角测量是指，通过在两处观察同一个点的夹角，确定该点的距离。三角测量最早由高斯提出并应用于测量学中，它在天文学、地理学的测量中都有应用。例如，我们可以通过不同季节观察到星星的角度，估计它离我们的距离。在 SLAM 中，我们主要用三角化来估计像素点的距离。

    <div align="center">
        <image src="./imgs/7.5-1.png" width = 400>
    </div>
    &emsp;


>最小二乘求解 $s_1，s_2$
- 和上一节类似，考虑图像 $I_1$ 和 $I_2$，以左图为参考，右图的变换矩阵为 $\pmb{T}$。相机光心为 $O_1$ 和 $O_2$。在 $I_1$ 中有特征点 $p_1$，对应 $I_2$ 中有特征点 $p_2$。理论上直线 $O_1p_1$ 与 $O_2p_2$ 在场景中会相交于一点 $P$，该点即是两个特征点所对应的地图点在三维场景中的位置。然而由于噪声的影响，这两条直线往往无法相交。因此，（又）可以通过最二小乘去求解。

    按照对极几何中的定义，设 $\pmb{x}_1， \pmb{x}_2$ 为两个特征点的归一化坐标，那么它们满足：
    $$s_1\pmb{x}_1 = s_2\pmb{R}\pmb{x}_2 + \pmb{t}$$

    现在我们已经知道了 $\pmb{R}， \pmb{t}$，想要求解的是两个特征点的深度 $s_1，s_2$。当然这两个深度是可以分开求的，比方说先来看 $s_2$。如果我要算 $s_2$，那么先对上式两侧左乘一个 $\pmb{x}^∧_1$ ，得：
    $$s_1\pmb{x}^∧_1 \pmb{x}_1 = 0 = s_2\pmb{x}^∧_1 \pmb{R}\pmb{x}_2 + \pmb{x}^∧_1 \pmb{t}$$

    该式左侧为零，右侧可看成 $s_2$ 的一个方程，可以根据它直接求得 $s_2$。有了 $s_2，s_1$ 也非常容易求出。于是，我们就得到了两个帧下的点的深度，确定了它们的空间坐标。当然，由于噪声的存在，我们估得的 $\pmb{R}, \pmb{t}$，不一定精确使 $s_1\pmb{x}_1 = s_2\pmb{R}\pmb{x}_2 + \pmb{t}$ 为零，所以更常见的做法求最小二乘解而不是零解。


