&emsp;
# 9.2.2 讨论
本节，我们实现了一个简单的两两帧间的视觉里程计，然而不管从速度还是精度上来说，它的效果都不理想。似乎这种看似简单的思路并不能得到很好的结果。我们来考虑一下有哪几种可能的原因：

1. 在位姿估计时，我们使用了 `RANSAC` 求出的 `PnP` 解。由于 RANSAC 只采用少数几个随机点来计算 PnP，虽然能够确定 inlier，但该方法容易受噪声影响。在 3D-2D 点存在噪声的情形下，我们要用 RANSAC 的解作为初值，再用非线性优化求一个最优值。下一节将说明这种做法是优于现在的做法的。

2. 由于现在的 $VO$ 是无结构的，特征点的 3D 位置被当作真值来估计运动。但实际上，$RGB-D$ 的深度图必定带有一定的误差，特别是那些深度过近或过远的地方。并且，由于特征点往往位于物体的边缘处，那些地方的深度测量值通常是不准确的。所以现在的做法不够精确，我们需要把特征点也放在一起优化。

3. 只考虑参考帧/当前帧的方式，一方面使得位姿估计过于依赖参考帧。如果参考帧质量太差，比如出现严重遮挡、光照变化的情况下，跟踪容易会丢失。并且，当参考帧位姿估计不准时，还会出现明显的漂移。另一方面，仅使用两帧数据显然没有充分地利用所有的信息。更自然的方式是比较当前帧和地图，而不是比较当前帧和参考帧。于是，我们要关心如何把当前帧与地图进行匹配，以及如何优化地图点的问题。

4. 由于输出了各步骤的运行时间，我们可以对计算量有一个大概的了解（表4）。可以看到，特征点的提取和匹配占据了绝大多数的计算时间，而看似复杂的 PnP 优化，计算量与之相比基本可以忽略。因此，如何提高特征提取、匹配算法的速度，将是特征点方法的一个重要的主题。一种可预见的方式是使用直接法/光流，可有效地避开繁重的特征计算工作。之前的章节已经讨论过直接法和光流法，读者不妨自行尝试一下。



