&emsp;
# 9.1 搭建VO框架
知晓了砖头和水泥的原理，并不代表能够建造伟大的宫殿。

在作者深爱的“我的世界”游戏中，玩家拥有的只是一些色彩、纹理不同的方块。它们的性质极其简单，而玩家所做的只是把这些方块放在空地上而已。理解一个方块至为简单，但实际拿起他们时，初学者往往只能搭建简单的火柴盒房屋，而有经验、有创造力的玩家则可用这些简单的方块，建造民居、园林、楼台亭榭乃至雄伟的城市（图 9-1 ）。

<div align="center">
    <image src="./imgs/9.1-1.png" width = 800>
</div>
&emsp;

在 SLAM 中，我们应该认为工程实现和理解算法原理至少是同等重要的，甚至更应强调如何书写实际可用的程序。算法的原理，就像一个个方块一样，我们可以清楚明确地讨论它们的原理和性质，但仅仅理解了一个方块并不能使你建造真正的建筑：它们需要大量的尝试、时间和经验，我们鼓励读者往更为实际的方向努力——但它们往往是十分复杂的。

就像在《我的世界》里那样，你需要掌握各种立柱、墙面、屋顶的结构，墙面的雕花，几何形体角度的计算，这些远远不像讨论每个方块的性质那样简单。

SLAM 的具体实现亦是如此，一个实用的程序会有很多的工程设计和技巧（Trick），还需讨论每一步出现问题之后将如何处理。原则上说，每个人实现的 SLAM 都会有所不同，多数时候我们并不能说哪种实现方式就一定是最好的。但是，我们通常会遇到一些共同的问题：“怎么管理地图点”、“如何处理误匹配”、“如何选择关键帧”等等。我希望你能对这些可能出现的问题产生一些直观的感觉——我们认为这种感觉是非常重要的。

所以，出于对实践的重视，本章我们将带领读者领略一下搭建 SLAM 框架的过程。就像建筑那样，我们要讨论柱间距、门面宽高比等琐碎但重要的问题。一个 SLAM 工程是复杂的。即使我们只保留核心的部分，也会占据大量的篇幅，导致本书变得过于沉重。

不过，请注意到，尽管完成之后的工程是复杂的，但是中间的“由简到繁”的过程，是值得详细讨论，有学习的价值的。所以，我们要从简单的数据结构出发，先来做一个简单的视觉里程计，再慢慢地把一些额外的功能加进来。换言之，我们要把从简单的复杂的过程展现给读者看，这样你才会明白一个库是如何像雪人那样慢慢堆起来的。

实践章的代码放在 slambook/project 中。由于随着开发过程不断前进，我们会对工程做一些删改，因此它的内容也会发生变化。所以我们会把中间的代码也保留在目录中，以版本号命名，以便读者随时查看、模仿。

