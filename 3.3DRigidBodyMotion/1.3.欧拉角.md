
&emsp;
## 3 欧拉角

无论是旋转矩阵、旋转向量，虽然它们能描述旋转，但对我们人类是非常不直观的。当我们看到一个旋转矩阵或旋转向量时，很难想象出来这个旋转究竟是什么样的。当它们变换时，我们也不知道物体是向哪个方向在转动。

而欧拉角则提供了一种非常直观的方式来描述旋转——它使用了三个分离的转角，把一个旋转分解成三次绕不同轴的旋转。当然，由于分解方式有许多种，所以欧拉角也存在着不同的定义方法。

比如说，当我先绕 $X$ 轴旋转，再绕 $Y$ 轴，最后绕 $Z$ 轴，就得到了一个 $XY Z$ 轴的旋转。同理，可以定义 $ZY Z$、$ZY X$ 等等旋转方式。如果讨论更细一些，还需要区分每次旋转是绕 `固定轴` 旋转的，还是绕 `旋转之后的轴` 旋转的，这也会给出不一样的定义方式。

&emsp;
>偏航-俯仰-滚转”（yaw-pitch-roll）
- 你或许在航空、航模中听说过“俯仰角”、“偏航角”这些词。欧拉角当中比较常用的一种，便是用“偏航-俯仰-滚转”（yaw-pitch-roll）三个角度来描述一个旋转的。

    由于它等价于 $ZY X$ 轴的旋转，我们就以 $ZY X$ 为例。假设一个刚体的前方（朝向我们的方向）为 $X$ 轴，右侧为 $Y$ 轴，上方为 $Z$ 轴，见图 3-3。那么，$ZY X$ 转角相当于把任意旋转分解成以下三个轴上的转角：
    - 绕物体的 $Z$ 轴旋转，得到偏航角 $yaw$
    - 绕旋转之后的 $Y$ 轴旋转，得到俯仰角 $pitch$
    - 绕旋转之后的 $X$ 轴旋转，得到滚转角 $roll$

    &emsp;
    
    此时，我们可以使用 $[r, p, y]^T$ 这样一个三维的向量描述任意旋转。这个向量十分的直观，我们可以从这个向量想象出旋转的过程。其他的欧拉角亦是通过这种方式，把旋转分解到三个轴上，得到一个三维的向量，只不过选用的轴，以及选用的顺序不一样。

    这里介绍的 $rpy$ 角是比较常用的一种，只有很少的欧拉角种类会有 $rpy$ 那样脍炙人口的名字。不同的欧拉角是按照旋转轴的顺序来称呼的。例如，$rpy$ 角的旋转顺序是 $ZY X$。同样，也有 $XY Z$, $ZY Z$ 这样欧拉角——但是它们就没有专门的名字了。

    值得一提的是，大部分领域在使用欧拉角时有各自的坐标方向和顺序上的习惯，不一定和我们这里说的相同。

&emsp;
>万向锁问题（Gimbal Lock）
- 欧拉角的一个重大缺点是会碰到著名的 `万向锁问题（Gimbal Lock）`：在俯仰角为 $±90◦$ 时，第一次旋转与第三次旋转将使用同一个轴，使得系统丢失了一个自由度（由三次旋转变成了两次旋转）。这被称为奇异性问题，在其他形式的欧拉角中也同样存在。

    理论上可以证明，只要我们想用三个实数来表达三维旋转时，都会不可避免地碰到奇异性问题。

    由于这种原理，欧拉角不适于 `插值` 和 `迭代`，往往只用于人机交互中。我们也很少在 SLAM 程序中直接使用欧拉角表达姿态，同样不会在 `滤波` 或 `优化` 中使用欧拉角表达旋转（因为它具有奇异性）。不过，若你想验证自己算法是否有错时，转换成欧拉角能够快速辨认结果的正确与否。




